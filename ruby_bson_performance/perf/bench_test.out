Run options: -v

# Running tests:

BenchTest#test_array_index_optimization = 
label: "Array index optimize none", allocated: 2051, user: 1.6
label: "Array index optimize 1024", allocated: 3, user: 0.7, base: 1.6, gain: 0.55

2.32 s = .
BenchTest#test_bson_int32? = 
label: "Integer#bson_int32? old", allocated: 0, user: 24.9
label: "Integer#bson_int32? new", allocated: 0, user: 30.5, base: 24.9, gain: -0.22

55.51 s = .
BenchTest#test_decode_ruby_prof = 
                                     user     system      total        real
test decode ruby prof            7.660000   5.850000  13.510000 ( 13.494363)
allocated: 2750017 allocated/line: 274

16.20 s = .
BenchTest#test_decode_twitter = 
                                     user     system      total        real
test_decode_twitter             67.670000   0.470000  68.140000 ( 68.102497)
allocated: 16538458 allocated/line: 321

90.59 s = .
BenchTest#test_doc_stats = 
0.44 String 811731
0.35 Array 646586
0.07 NilClass 120515
0.06 Fixnum 120181
0.05 FalseClass 89655
0.02 Hash 44144
0.01 TrueClass 18245
0.00 Float 996
objects: 1852053
objects/doc: 185

5.44 s = .
BenchTest#test_encode_bson_with_placeholder = 
label: "Encode bson optimize to_bson", allocated: 10, user: 8.4
label: "Encode bson optimize to_bson_int32", allocated: 10, user: 7.4, base: 8.4, gain: 0.12
label: "Encode bson optimize set_int32", allocated: 7, user: 6.3, base: 8.4, gain: 0.26

25.57 s = .
BenchTest#test_encode_ruby_prof = 
                                     user     system      total        real
test encode ruby prof            8.550000   6.490000  15.040000 ( 15.037680)
allocated: 1645382 allocated/line: 164

16.60 s = .
BenchTest#test_encode_twitter = 
                                     user     system      total        real
test_encode_twitter             19.950000   0.090000  20.040000 ( 20.025218)
allocated: 8480490 allocated/line: 164

45.41 s = .
BenchTest#test_ext_rb_float_to_bson = 
{:label=>"test_ext_rb_float_to_bson", :utime=>3.4799999999999898, :stime=>1.6900000000000013, :cutime=>0.0, :cstime=>0.0, :real=>5.17529, :allocated=>10000026, :count=>10000000}

7.25 s = .
BenchTest#test_ext_rb_integer_to_bson_key_large = 
{:label=>"test_ext_rb_integer_to_bson_key_large", :utime=>4.27000000000001, :stime=>0.0, :cutime=>0.0, :cstime=>0.0, :real=>4.271815, :allocated=>26, :count=>10000000}

4.35 s = .
BenchTest#test_ext_rb_integer_to_bson_key_small = 
{:label=>"test_ext_rb_integer_to_bson_key_small", :utime=>29.819999999999993, :stime=>0.0, :cutime=>0.0, :cstime=>0.0, :real=>29.806014, :allocated=>26, :count=>100000000}

29.84 s = .
BenchTest#test_ext_rb_string_check_for_illegal_characters! = 
{:label=>"test_ext_rb_string_check_for_illegal_characters!", :utime=>10.889999999999986, :stime=>0.0, :cutime=>0.0, :cstime=>0.0, :real=>10.886361, :allocated=>30000026, :count=>10000000}

10.91 s = .
BenchTest#test_ext_rb_symbol_to_bson = 
{:label=>"test_ext_rb_symbol_to_bson", :utime=>17.230000000000018, :stime=>0.0, :cutime=>0.0, :cstime=>0.0, :real=>17.227631, :allocated=>30000026, :count=>10000000}

17.24 s = .
BenchTest#test_ext_rb_time_to_bson = 
{:label=>"test_ext_rb_time_to_bson", :utime=>11.670000000000016, :stime=>0.0, :cutime=>0.0, :cstime=>0.0, :real=>11.667611, :allocated=>40000026, :count=>10000000}

11.68 s = .
BenchTest#test_hash_integer_to_bson_hint = 
label: "Hash integer to_bson no hint", allocated: 2051, user: 6.3
label: "Hash integer to_bson hint", allocated: 2051, user: 6.3, base: 6.3, gain: 0.01

12.64 s = .
BenchTest#test_hash_string_to_bson_hint = 
label: "Hash string to_bson no hint", allocated: 3076, user: 9.7
label: "Hash string to_bson hint", allocated: 3076, user: 9.9, base: 9.7, gain: -0.02

19.65 s = .
BenchTest#test_integer_optimization = 
label: "Integer optimize none", allocated: 3076, user: 8.1
label: "Integer optimize int32", allocated: 3076, user: 8.7, base: 8.1, gain: -0.08

16.80 s = .
BenchTest#test_integer_to_bson_optimization = 
label: "Integer to_bson optimize none", allocated: 5126, user: 4.4
label: "Integer to_bson optimize test order", allocated: 3076, user: 3.6, base: 4.4, gain: 0.20

7.99 s = .
BenchTest#test_nilclass_to_bson_optimization = 
label: "Nil to_bson optimize none", allocated: 1, user: 10.3
label: "Nil to_bson optimize noop", allocated: 1, user: 9.2, base: 10.3, gain: 0.11

19.45 s = .
BenchTest#test_seek = 
label: "Encode bson optimize none", allocated: 7, user: 12.2
label: "Encode bson optimize seek", allocated: 7, user: 12.3, base: 12.2, gain: -0.00

24.53 s = .
BenchTest#test_string_key_optimization = 
label: "Symbol key optimize none", allocated: 2051, user: 2.9
label: "Symbol key optimize hash key v0", allocated: 1027, user: 3.3, base: 2.9, gain: -0.14
label: "Symbol key optimize hash key v1", allocated: 1027, user: 2.4, base: 2.9, gain: 0.18

8.73 s = .
BenchTest#test_string_to_bson_key_mongodb = 
label: "string to_bson_key", allocated: 2, user: 10.4
label: "string to_bson_key flag check", allocated: 2, user: 11.9, base: 10.4, gain: -0.14
label: "string to_bson_key mongodb", allocated: 2, user: 12.5, base: 10.4, gain: -0.20

34.73 s = .
BenchTest#test_symbol_key_optimization = 
label: "Symbol key optimize none", allocated: 3076, user: 3.5
label: "Symbol key optimize hash key v0", allocated: 1027, user: 3.1, base: 3.5, gain: 0.12
label: "Symbol key optimize hash key v1", allocated: 1027, user: 2.2, base: 3.5, gain: 0.36

8.95 s = .
BenchTest#test_time_to_bson_optimization = 
label: "time to_bson optimize none", allocated: 6, user: 21.1
label: "time to_bson optimize sec usec", allocated: 5, user: 18.5, base: 21.1, gain: 0.12

39.76 s = .
BenchTest#test_to_bson_object_allocation = 
utime: 5.21, allocated:  4, label: "BSON::CodeWithScope"
utime: 2.55, allocated:  2, label: "Hash"
utime: 2.54, allocated:  2, label: "BSON::Document"
utime: 2.53, allocated:  5, label: "Regexp"
utime: 1.95, allocated:  2, label: "Array"
utime: 1.46, allocated:  2, label: "Symbol"
utime: 1.35, allocated:  4, label: "Time"
utime: 1.16, allocated:  1, label: "BSON::Code"
utime: 1.14, allocated:  1, label: "String"
utime: 1.06, allocated:  0, label: "BSON::Binary"
utime: 0.83, allocated:  2, label: "Bignum"
utime: 0.42, allocated:  0, label: "Fixnum"
utime: 0.38, allocated:  0, label: "BSON::Timestamp"
utime: 0.35, allocated:  0, label: "BSON::ObjectId"
utime: 0.22, allocated:  0, label: "Float"
utime: 0.21, allocated:  0, label: "FalseClass"
utime: 0.21, allocated:  0, label: "TrueClass"
utime: 0.19, allocated:  0, label: "NilClass"
utime: 0.18, allocated:  0, label: "BSON::MaxKey"
utime: 0.18, allocated:  0, label: "BSON::MinKey"
utime: 0.18, allocated:  0, label: "BSON::Undefined"

24.48 s = .


Finished tests in 556.611533s, 0.0449 tests/s, 0.0000 assertions/s.

25 tests, 0 assertions, 0 failures, 0 errors, 0 skips

ruby -v: ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-darwin12.3.0]
